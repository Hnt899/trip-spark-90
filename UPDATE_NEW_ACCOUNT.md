# Обновление данных для нового аккаунта МТС Exolve

## Что нужно обновить

После создания нового подтверждённого аккаунта с подписанным договором нужно обновить следующие секреты в Supabase:

### 1. API ключ (обязательно)
- **Секрет:** `EXOLVE_API_KEY`
- **Где найти:** Личный кабинет МТС Exolve → Раздел "Ключи" или "API"
- **Формат:** Строка с API ключом (например: `abc123def456...`)

### 2. Номер отправителя или альфа-имя (опционально, но рекомендуется)
- **Секрет:** `EXOLVE_SENDER`
- **Где найти:** 
  - Для номера: Личный кабинет → "Нумерация" → "Мои номера"
  - Для альфа-имени: Личный кабинет → "Сообщения" → "Альфа-имена"
- **Формат:** 
  - Номер: `+79001234567` или `79001234567`
  - Альфа-имя: `ваше_альфа_имя` (например: `TripSpark`)

## Команды для обновления

### Шаг 1: Обновить API ключ

```bash
npx supabase secrets set EXOLVE_API_KEY=ваш_новый_api_ключ
```

**Важно:** Замените `ваш_новый_api_ключ` на реальный API ключ из нового аккаунта.

### Шаг 2: Обновить номер отправителя (если используете)

Если у вас есть номер телефона:
```bash
npx supabase secrets set EXOLVE_SENDER=+79001234567
```

Если у вас есть альфа-имя:
```bash
npx supabase secrets set EXOLVE_SENDER=ваше_альфа_имя
```

Если не хотите указывать отправителя (будет использован номер по умолчанию):
```bash
# Можно не устанавливать EXOLVE_SENDER, или удалить старый:
npx supabase secrets unset EXOLVE_SENDER
```

### Шаг 3: Передеплоить Edge Function

После обновления секретов нужно передеплоить функцию, чтобы она использовала новые значения:

```bash
npx supabase functions deploy send-sms-exolve
```

## Проверка обновления

После обновления секретов и деплоя:

1. Попробуйте зарегистрироваться на сайте с номером телефона
2. Проверьте логи Edge Function в Supabase Dashboard:
   - Project Settings → Edge Functions → `send-sms-exolve` → Logs
3. Убедитесь, что SMS доставляется с вашим текстом (не тестовым)

## Что изменилось с новым аккаунтом

✅ **Теперь доступно:**
- Отправка SMS на любые номера (не только на ваш)
- Произвольный текст сообщений (ваш код подтверждения будет доставляться)
- Полноценная работа REST API
- Нет ограничений тестового режима

## Если что-то не работает

1. **Проверьте API ключ:**
   - Убедитесь, что скопировали ключ полностью (без пробелов)
   - Проверьте, что ключ активен в личном кабинете

2. **Проверьте номер отправителя:**
   - Если используете номер - убедитесь, что он куплен и активен
   - Если используете альфа-имя - убедитесь, что оно согласовано

3. **Проверьте баланс:**
   - Убедитесь, что на балансе МТС Exolve есть средства

4. **Проверьте логи:**
   - Откройте логи Edge Function и посмотрите на ошибки
   - Убедитесь, что секреты установлены правильно

